#!/bin/bash

digest=$1

check_digest=$(openssl dgst -sha256 node_modules-$digest.tar.gz | awk '{print $2}')

if [ "$digest" != "$check_digest" ]; then
  echo "Digest mismatch: $digest != $check_digest"
  exit -1
fi

if [ -d node_modules ]; then
  rm -r node_modules
fi

tar xzf "node_modules-$digest.tar.gz" ./node_modules

exit $?
